<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Jugador</title>
<link rel="stylesheet" href="style.css">
<script src="/socket.io/socket.io.js"></script>
</head>
<body>

<input id="room" placeholder="C√≥digo sala">
<input id="name" placeholder="Nombre">
<button onclick="join()">Entrar</button>

<h2 id="role"></h2>

<div id="vote"></div>

<script>
const socket=io();
let room="";

function join(){
 room=document.getElementById("room").value.toUpperCase();

 socket.emit("join",{
  room,
  name:document.getElementById("name").value
 });
}

socket.on("role",d=>{
 if(d.impostor){
  document.getElementById("role").innerText="Eres el impostor üòà";
 } else {
  document.getElementById("role").innerText="Palabra: "+d.word;
 }
});

socket.on("playerList",list=>{
 let html="<h3>Vota:</h3>";

 for(let id in list){
  html+=`<button onclick="vote('${id}')">${list[id].name}</button><br>`;
 }

 document.getElementById("vote").innerHTML=html;
});

function vote(target){
 socket.emit("vote",{room,target});
 document.getElementById("vote").innerHTML="Voto enviado ‚úîÔ∏è";
}
</script>

</body>
</html>
